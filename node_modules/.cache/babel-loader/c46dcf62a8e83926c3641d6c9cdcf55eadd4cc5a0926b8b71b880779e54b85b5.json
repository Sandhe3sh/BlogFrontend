{"ast":null,"code":"// Home.jsx\nimport React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{blogAPI}from'../services/api';import'./Home.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Home=()=>{const[blogs,setBlogs]=useState([]);const[currentPage,setCurrentPage]=useState(0);const[totalPages,setTotalPages]=useState(0);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem('token');if(!token){navigate('/login');return;}fetchBlogs(currentPage);},[currentPage,navigate]);const fetchBlogs=async page=>{try{const response=await blogAPI.getBlogs(page,5);setBlogs(response.data.content||[]);setTotalPages(response.data.totalPages||0);setLoading(false);}catch(error){console.error('Error fetching blogs:',error);setBlogs([]);setLoading(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Blogs\"}),!blogs||blogs.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No blogs found.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[blogs&&blogs.map(blog=>{var _blog$author;return/*#__PURE__*/_jsxs(\"div\",{className:\"blog-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/blog/\".concat(blog.id),className:\"blog-link\",children:blog.title})}),/*#__PURE__*/_jsxs(\"p\",{className:\"blog-meta\",children:[\"By \",((_blog$author=blog.author)===null||_blog$author===void 0?void 0:_blog$author.email)||'Unknown author',\" on \",blog.createdAt?new Date(blog.createdAt).toLocaleDateString():'Unknown date']}),/*#__PURE__*/_jsxs(\"p\",{children:[blog.content.substring(0,200),\"...\"]})]},blog.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(prev=>Math.max(0,prev-1)),disabled:currentPage===0,className:\"pagination-button prev\",children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"page-info\",children:[\"Page \",currentPage+1,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(prev=>Math.min(totalPages-1,prev+1)),disabled:currentPage>=totalPages-1,className:\"pagination-button next\",children:\"Next\"})]})]})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","blogAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","blogs","setBlogs","currentPage","setCurrentPage","totalPages","setTotalPages","loading","setLoading","navigate","token","localStorage","getItem","fetchBlogs","page","response","getBlogs","data","content","error","console","className","children","length","map","blog","_blog$author","to","concat","id","title","author","email","createdAt","Date","toLocaleDateString","substring","onClick","prev","Math","max","disabled","min"],"sources":["C:/Users/vishnu/OneDrive/Learnthon 2024/blog/frontend/src/pages/Home.js"],"sourcesContent":["\n\n// Home.jsx\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { blogAPI } from '../services/api';\nimport './Home.css';\n\nconst Home = () => {\n  const [blogs, setBlogs] = useState([]);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [totalPages, setTotalPages] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    fetchBlogs(currentPage);\n  }, [currentPage, navigate]);\n\n  const fetchBlogs = async (page) => {\n    try {\n      const response = await blogAPI.getBlogs(page, 5);\n      setBlogs(response.data.content || []);\n      setTotalPages(response.data.totalPages || 0);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching blogs:', error);\n      setBlogs([]);\n      setLoading(false);\n    }\n  };\n\n  if (loading) return <div className=\"loading\">Loading...</div>;\n\n  return (\n    <div className=\"home-container\">\n      <h1>All Blogs</h1>\n      {!blogs || blogs.length === 0 ? (\n        <p>No blogs found.</p>\n      ) : (\n        <>\n          {blogs && blogs.map(blog => (\n            <div key={blog.id} className=\"blog-card\">\n              <h3>\n                <Link to={`/blog/${blog.id}`} className=\"blog-link\">\n                  {blog.title}\n                </Link>\n              </h3>\n              <p className=\"blog-meta\">\n                By {blog.author?.email || 'Unknown author'} on {blog.createdAt ? new Date(blog.createdAt).toLocaleDateString() : 'Unknown date'}\n              </p>\n              <p>{blog.content.substring(0, 200)}...</p>\n            </div>\n          ))}\n          \n          <div className=\"pagination\">\n            <button\n              onClick={() => setCurrentPage(prev => Math.max(0, prev - 1))}\n              disabled={currentPage === 0}\n              className=\"pagination-button prev\"\n            >\n              Previous\n            </button>\n            <span className=\"page-info\">\n              Page {currentPage + 1} of {totalPages}\n            </span>\n            <button\n              onClick={() => setCurrentPage(prev => Math.min(totalPages - 1, prev + 1))}\n              disabled={currentPage >= totalPages - 1}\n              className=\"pagination-button next\"\n            >\n              Next\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}